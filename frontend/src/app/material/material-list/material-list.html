<app-navbar2></app-navbar2>


<div class="dashboard-container">
  <!-- Header -->
  <div class="material-header">
    <h2>Gerenciar Matérias</h2>
    <div class="header-actions">
      <button class="btn-primary" (click)="irParaNovo()">
        Nova Matéria
      </button>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filters">
    <div class="filter-row">
      <div class="form-group">
        <label for="filtroTitulo">Filtrar por Título:</label>
        <input
          type="text"
          id="filtroTitulo"
          class="form-control"
          [(ngModel)]="filtros.titulo"
          (input)="aplicarFiltros()"
          placeholder="Digite o título da matéria...">
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <p>Carregando matérias...</p>
  </div>

  <!-- Grid de matérias -->
  <div *ngIf="!loading && materiais.length > 0" class="material-grid">
    <div *ngFor="let material of materiais" class="material-card">
      <h3 (click)="abrirMaterial(material.id)">{{ material.titulo }}</h3>
      <p>{{ material.conteudo }}</p>
      <div class="material-meta">
        <strong>Tradução:</strong> {{ material.traducao }}<br>
        <strong>Criado em:</strong> {{ formatarData(material.createdAt) }}
      </div>
      <div class="material-actions">
        <button class="btn-secondary1" (click)="editarMaterial(material.id)">
          Editar
        </button>
        <button class="btn-danger1" (click)="excluirMaterial(material.id)">
          Excluir
        </button>
      </div>
    </div>
  </div>

  <!-- Estado vazio -->
  <div *ngIf="!loading && materiais.length === 0" class="empty-state">
    <h3>Nenhuma matéria encontrada</h3>
    <p>Comece criando sua primeira matéria clicando no botão "Nova Matéria" acima.</p>
  </div>
</div>




<ng-template #modalAviso let-modal>
  <div class="modal-header">
    <h4 class="modal-title">{{ tituloModal }}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    <p>{{ mensagemModal }}</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.close()">OK</button>
  </div>
</ng-template>

<ng-template #modalExclusao let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Confirmar Exclusão</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss()"></button>
  </div>
  <div class="modal-body">
    <p><strong>Você tem certeza que deseja excluir este material?</strong></p>
    <p class="text-danger">Esta ação não poderá ser desfeita.</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancelar</button>
    <button type="button" class="btn btn-danger" (click)="modal.close('confirm')">Sim, excluir</button>
  </div>
</ng-template>