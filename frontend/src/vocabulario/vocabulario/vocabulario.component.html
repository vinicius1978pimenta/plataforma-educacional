  <app-navbar></app-navbar>
  <div class="vocabulario-page">

  <!-- Header da P√°gina -->
  <div class="page-header">
    <h1>Vocabul√°rio</h1>
    <button class="btn btn-info" routerLink="/dashboard-aluno">
      ‚Üê Voltar
    </button>
  </div>

    <div class="vocabulario-container">

      <!-- Coluna do CRUD -->
      <div class="form-section">
        <h2>Adicionar Nova Palavra</h2>
        <form [formGroup]="vocabularioForm" (ngSubmit)="adicionarPalavra()" class="vocabulario-form">
          
          <div class="form-group">
            <label for="palavra">Palavra *</label>
            <input type="text" id="palavra" formControlName="palavra" 
                  placeholder="Digite a palavra..."
                  [class.error]="vocabularioForm.get('palavra')?.invalid && vocabularioForm.get('palavra')?.touched" />
            <div class="error-message" *ngIf="vocabularioForm.get('palavra')?.invalid && vocabularioForm.get('palavra')?.touched">
              Palavra √© obrigat√≥ria
            </div>
          </div>

          <div class="form-group">
            <label for="traducao">Tradu√ß√£o (opcional)</label>
            <input type="text" id="traducao" formControlName="traducao" placeholder="Deixe vazio para traduzir automaticamente..." />
            <small class="help-text">Se n√£o informar, ser√° traduzido automaticamente</small>
          </div>

          <div class="form-group">
            <label for="idioma">Idioma</label>
            <select id="idioma" formControlName="idioma">
              <option value="es">Espanhol</option>
              <option value="en">Ingl√™s</option>
              <option value="fr">Franc√™s</option>
              <option value="de">Alem√£o</option>
              <option value="it">Italiano</option>
            </select>
          </div>

          <button type="submit" class="btn btn-primary" [disabled]="vocabularioForm.invalid || carregando">
            <span *ngIf="carregando" class="loading-spinner"></span>
            {{ carregando ? 'Adicionando...' : 'Adicionar Palavra' }}
          </button>
        </form>
      </div>

      <!-- Coluna da Lista de Palavras -->
      <div class="lista-section">
        <div class="lista-header">
          <h2>Minhas Palavras</h2>
          <span class="contador">{{ (vocabularios$ | async)?.length || 0 }} palavras</span>
        </div>

        <div *ngIf="carregandoLista" class="loading-container">
          <div class="loading-spinner"></div>
          <p>Carregando vocabul√°rios...</p>
        </div>

        <div *ngIf="!carregandoLista && (vocabularios$ | async)?.length === 0" class="empty-state">
          <div class="empty-icon">üìö</div>
          <h3>Nenhuma palavra ainda</h3>
          <p>Adicione sua primeira palavra para come√ßar a construir seu vocabul√°rio!</p>
        </div>

        <div *ngIf="!carregandoLista && (vocabularios$ | async)?.length! > 0" class="vocabularios-grid">
          <div *ngFor="let vocab of vocabularios$ | async; trackBy: trackByVocabulario" class="vocabulario-card">
            <div class="card-content">
              <div class="palavra">{{ vocab.palavra }}</div>
              <div class="traducao">{{ vocab.traducao }}</div>
              <div class="data">{{ formatarData(vocab.criadoEm) }}</div>
            </div>
            <button class="btn-excluir" (click)="excluirPalavra(vocab.id, vocab.palavra)" [disabled]="excluindo === vocab.id" title="Excluir palavra">
              <span *ngIf="excluindo === vocab.id" class="loading-spinner small"></span>
              <span *ngIf="excluindo !== vocab.id">üóëÔ∏è</span>
            </button>
          </div>
        </div>
      </div>

    </div>

    <!-- Mensagens de feedback -->
    <div *ngIf="mensagem" class="mensagem" [ngClass]="tipoMensagem">
      {{ mensagem }}
    </div>

  </div>
