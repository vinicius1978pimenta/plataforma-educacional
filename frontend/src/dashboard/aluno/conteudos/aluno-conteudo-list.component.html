<div class="container">
    <!-- Header -->
    <div class="header fade-in">
        <button 
            (click)="voltarParaMateriais()"
            class="btn-back">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Voltar aos Materiais
        </button>

        <div *ngIf="material" class="material-card slide-up">
            <h1 class="material-title">{{ material.titulo }}</h1>
            <p class="material-content">{{ material.conteudo }}</p>
        </div>
    </div>

    <!-- Lista de ConteÃºdos -->
    <div *ngIf="conteudos.length > 0; else semConteudo">
        <div class="content-grid">
            <div 
                *ngFor="let c of conteudos; let i = index" 
                class="content-card slide-up"
                [class]="'slide-up-delay-' + (i % 3 + 1)"
                (click)="abrirModalConteudo(c)"
                tabindex="0"
                (keydown.enter)="abrirModalConteudo(c)">
                
                <div class="card-header">
                    <div class="type-info">
                        <div class="type-icon">{{ getIconeConteudo(c.tipo) }}</div>
                        <span class="type-badge badge-{{c.tipo?.toLowerCase()}}">
                            {{ c.tipo }}
                        </span>
                    </div>
                    <div class="card-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </div>

                <h3 class="card-title">{{ c.titulo }}</h3>
                <p class="card-description">{{ c.descricao }}</p>

                <div class="card-meta">
                    <span class="professor-info">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; margin-right: 4px;">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        {{ c.professor?.nome }}
                    </span>
                    <span class="date-info">{{ formatarData(c.createdAt) }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Estado Vazio -->
    <ng-template #semConteudo>
        <div class="empty-state fade-in">
            <div class="empty-icon">ðŸ“š</div>
            <p class="empty-text">Nenhum conteÃºdo disponÃ­vel</p>
        </div>
    </ng-template>

    <!-- Modal -->
    <div 
        *ngIf="showModal"
        class="modal-overlay"
        (click)="fecharModal()">
        
        <div 
            class="modal-content"
            (click)="$event.stopPropagation()">
            
            <div class="modal-header">
                <h3 class="modal-title">{{ conteudoSelecionado?.titulo }}</h3>
            </div>

            <div class="modal-body">
                <!-- ConteÃºdo de Texto -->
                <div *ngIf="conteudoSelecionado?.texto && conteudoSelecionado?.tipo === 'TEXTO'" class="modal-content-text">
                    <strong class="content-label">ConteÃºdo:</strong>
                    <div class="content-text">{{ conteudoSelecionado?.descricao }}</div>
                </div>

                <!-- AÃ§Ãµes do Modal -->
                <div class="modal-actions">
                    <button 
                        *ngIf="conteudoSelecionado?.tipo === 'LINK'"
                        (click)="visualizarConteudo(conteudoSelecionado)"
                        class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; margin-right: 8px;">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                            <polyline points="15,3 21,3 21,9"/>
                            <line x1="10" y1="14" x2="21" y2="3"/>
                        </svg>
                        Abrir Link
                    </button>

                    <button 
                        *ngIf="conteudoSelecionado?.tipo === 'TEXTO' && !conteudoSelecionado?.texto"
                        (click)="visualizarConteudo(conteudoSelecionado)"
                        class="btn btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; margin-right: 8px;">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        Carregar Texto
                    </button>

                    <button 
                        *ngIf="conteudoSelecionado?.tipo === 'PDF'"
                        (click)="downloadPdf()"
                        class="btn btn-danger"
                        [disabled]="loading">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline; margin-right: 8px;">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        <span *ngIf="!loading">Baixar PDF</span>
                        <span *ngIf="loading">Baixando...</span>
                    </button>

                    <button 
                        (click)="fecharModal()"
                        class="btn btn-secondary">
                        Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>